<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ç‹å­å›åˆ°å°æ‡‰æ˜ŸçƒéŠæˆ²</title>
<style>
  body {
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    background: #f0f8ff;
    font-family: sans-serif;
  }

  #container {
    position: relative;
    width: 400px;
    height: 400px;
  }

  .planet {
    position: absolute;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: white;
    font-weight: bold;
  }

  #planet1 { background: #3498db; top: 0; left: 0; }
  #planet2 { background: #e74c3c; top: 0; right: 0; }
  #planet3 { background: #2ecc71; bottom: 0; left: 0; }
  #planet4 { background: #f1c40f; bottom: 0; right: 0; }

  svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 400px;
    height: 400px;
  }

  line {
    stroke: #555;
    stroke-width: 3;
    cursor: pointer;
    transition: stroke 0.3s;
  }

  line:hover { stroke: #000; }

  .person {
    position: absolute;
    font-size: 2rem;
    transition: transform 0.8s ease;
  }
</style>
</head>
<body>
<h2>ç‹å­å›åˆ°å°æ‡‰æ˜ŸçƒéŠæˆ²</h2>
<div id="container">
  <svg>
    <!-- åƒ…å››æ¢é‚Šç·š -->
    <line id="line12" x1="40" y1="40" x2="360" y2="40"></line>
    <line id="line13" x1="40" y1="40" x2="40" y2="360"></line>
    <line id="line24" x1="360" y1="40" x2="360" y2="360"></line>
    <line id="line34" x1="40" y1="360" x2="360" y2="360"></line>
  </svg>

  <div class="planet" id="planet1"></div>
  <div class="planet" id="planet2"></div>
  <div class="planet" id="planet3"></div>
  <div class="planet" id="planet4"></div>
</div>

<script>
const planets = {
  planet1: document.getElementById("planet1"),
  planet2: document.getElementById("planet2"),
  planet3: document.getElementById("planet3"),
  planet4: document.getElementById("planet4"),
};

// ç‹å­ emoji èˆ‡å°æ‡‰æ˜Ÿçƒ
const princes = [
  { emoji: "ğŸ³", target: "planet1" },
  { emoji: "ğŸ·", target: "planet2" },
  { emoji: "ğŸ¸", target: "planet3" },
  { emoji: "ğŸ¥", target: "planet4" }
];

// éš¨æ©Ÿåˆ†é…ç‹å­åˆ°æ˜Ÿçƒ
const planetKeys = Object.keys(planets);
function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}
const shuffledPlanets = shuffle([...planetKeys]);
princes.forEach((prince, i) => {
  const pDiv = document.createElement("div");
  pDiv.classList.add("person");
  pDiv.textContent = prince.emoji;
  planets[shuffledPlanets[i]].appendChild(pDiv);
});

// å®šç¾©å¯é»æ“Šçš„ç·š
const lines = [
  ["line12", "planet1", "planet2"],
  ["line13", "planet1", "planet3"],
  ["line24", "planet2", "planet4"],
  ["line34", "planet3", "planet4"]
];

// é»æ“Šç·šæ¢äº¤æ›äººç‰©
lines.forEach(([lineId, p1, p2]) => {
  const line = document.getElementById(lineId);
  line.addEventListener("click", () => {
    const personA = planets[p1].querySelector(".person");
    const personB = planets[p2].querySelector(".person");

    if (!personA || !personB) return; // è‹¥å…¶ä¸­ä¸€æ–¹æ²’äººå‰‡ä¸å‹•ä½œ

    const rectA = planets[p1].getBoundingClientRect();
    const rectB = planets[p2].getBoundingClientRect();

    const deltaX = rectB.left - rectA.left;
    const deltaY = rectB.top - rectA.top;

    personA.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
    personB.style.transform = `translate(${-deltaX}px, ${-deltaY}px)`;

    setTimeout(() => {
      planets[p1].appendChild(personB);
      planets[p2].appendChild(personA);

      personA.style.transform = '';
      personB.style.transform = '';

      checkSuccess();
    }, 800);
  });
});

// æª¢æŸ¥æ¯å€‹ç‹å­æ˜¯å¦å›åˆ°å°æ‡‰æ˜Ÿçƒ
function checkSuccess() {
  const success = princes.every(prince => {
    const planet = planets[prince.target];
    const person = planet.querySelector(".person");
    return person && person.textContent === prince.emoji;
  });

  if (success) {
    alert("æ­å–œï¼æ¯å€‹ç‹å­éƒ½å›åˆ°å°æ‡‰æ˜Ÿçƒï¼");
  }
}
</script>
</body>
</html>
